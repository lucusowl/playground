# 클라이언트 보안

## 1. 악성 소프트웨어

의도적으로 개발자가 사용자가 원하지 않는 기능을 프로그램에 포함  
악의적으로 프로그램 오류를 발생시켜 보안속성을 침해하는 유해 프로그램을 지칭  

분류 기준
- 독립형/기생형
  - 독립형: 자체 구동, OS의 스케줄되어 구동
    - e.g. `웜`, `좀비 프로그램`, ...
  - 기생형: 호스트 프로그램 필요
    - e.g. `바이러스`, `논리폭탄`, `백도어`, ...
- 자기 복제 여부
  - 바이러스성
    - e.g. `웜`, `바이러스`, ...
  - 비-바이러스성
    - e.g. `트로이목마`, `백도어`, ...

주요 악성프로그램 요약
| 구분     | 웜                 | 바이러스         | 트로이목마                     |
| -------- | ------------------ | ---------------- | ------------------------------ |
| 자기복제 | ✅(매우강함)        | ✅                | ❌                              |
| 감염형태 | ❌독자적으로 존재   | ✅파일,부트섹터   | ✅프로그램 위장,코드형태로 삽입 |
| 전파경로 | 스스로 전파        | 감염파일 옮김    | 감염파일 다운로드              |
| 주요증상 | 네트워크 성능 저하 | 시스템,파일 손상 | PC 성능 저하, 시스템,파일 손상 |

### 1.1. 바이러스, Virus

다른 프로그램을 변형("감염")시키는 프로그램  
자신을 복제할 수 있는 명령코드를 주입, 실행 콘텐츠 전송자속에 내장  

분류
| 세대 | 이름              | 설명                                                                                                                                                                                           |
| ---- | ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1    | 원시형 Primitive  | 구조 단순, 분석 쉬움, 기억장소 상주하는 경우 빈번                                                                                                                                              |
| 2    | 암호화 Encryption | 프로그램 일부,대부분을 암호화, 백신프로그램 진단불가                                                                                                                                           |
| 3    | 은폐형 Stealth    | 파일길이, 파일내용을 백신프로그램이 읽으려 할 때 정상내용으로 보여줌                                                                                                                           |
| 4    | 갑옷형 Armour     | 백신프로그램 속이기보단 바이러스 분석을 어렵게 백신개발지연 목표                                                                                                                               |
| 5    | 매크로 Macro      | 매크로기능(데이터파일 속 명령어 실행)이 있는 APP(MS-Office,오토캐드,PDF,...)을 실행할 때 감염<br>플랫폼과 무관하게 문서감염을 목표<br>메일을 통해 첨부파일 전달 등 부주의를 노리는 방법이 성행 |

#### 바이러스 증상

- 파일 사이즈 변화
- 갱신 타임스탬프 변화
- 저장장치의 잔여공간 급속도로 변화
- 디스크 접근횟수 급속도로 변화

#### 바이러스 방지책

바이러스 위협은 대부분 예방으로 막음  
그러나 공격 성공 이후의 해결책으론 `탐지 -> 식별 -> 제거`를 수행  

- 바이러스 예방
  - 신뢰있는 APP 사용 권장
  - 첨부파일 주의
  - 바이러스 스캐너로 주기적 검사 + 업데이트
  - 매크로 기능은 기본적으로 비활성화
  - 업무에 방해가 되지 않는 수준까지 보안 정책 수립
- AntiVirus Filtering Method
  - virus signature scanning
    - 특정 바이러스 코드 signature를 탐지
    - 실행 가능 코드 영역(스크립트, ...)에 이진값으로 표현됨
    - 이 이진값 명령어 나열로 감지
  - behavioral virus scanning
    - 바이러스 동작 중 특정 행동이 보이면 추적하는 방법
    - signature scanning 보완, 웜 대처도 가능

### 1.2. 웜, Worm

자신을 복제, 네트워크를 통해 다른 컴퓨터로 확산  
시스템에 직접적인 영향은 미치지 않지만 기하급수적으로 감염된호스트 수를 늘림

`rabbit`: 컴퓨터 자원 고갈을 목적으로 제한없이 자기복제하는 웜 또는 바이러스

웜은 자신을 실행하기 위해 시스템 취약점 공격 -> 시스템 접근권한 획득 -> 공격 시작  
e.g. 백도어 설치 -> DDoS 봇, 좀비프로세스 생성, 악성 SW 설치

#### 웜 대응책

바이러스 대처방식과 유사  
웜 확산이 이뤄지면 네트워크 활동이 활발해지므로 네트워크 모니터으로 웜에 대한 기본적인 방어를 갖출 수 있음  

- 네트워크 기반 웜 방어
  - 진입 모니터 Ingress Monitors
    - 경계 라우터나 외부 침입차단시스템의 필터링 소프트웨어
  - 진출 모니터 Egress Monitors
    - 나가는 트래픽, 의심스러운 행동 모니터링 -> 출처 잡아내게 설계

### 1.3. 트로이목마, Trojan horse

다른 프로그램으로 위장하여 활동하는 프로그램  
다른 파일을 감염시키거나 복제하지 않지만 자신을 포함한 프로그램이 실행되면 시스템 통제권한을 부여받는 것을 목표

- 스파이웨어: 민감한 정보를 수집해 주기적으로 원격지에 보내는 프로그램도 일종
  - -> 신원 도용, 스패밍, 사기, 표적광고에 사용됨
- Back Office
  - CDC(Cult of Dead Cow) 해커그룹 발표 (1998.09)
  - 백도어 활용, MS Win95/98/2000 관리자 도구

특징, 트로이목마 기능
- 원격조정
- 패스워드 가로채기
- 키보드 입력 가로채기
- 시스템 파일,데이터 파괴

#### 트로이목마 대응책

- 신뢰할 수 없는 파일 다운로드 주의
- 웹 브라우저 최신상태 유지
- 안티-트로이목마 도구 사용

### 1.4. 기타 악성 소프트웨어

| 이름             | 설명                                                                                     |
| ---------------- | ---------------------------------------------------------------------------------------- |
| 논리폭탄         | 조건이 충족되면 트리거가 작동되는 프로그램 유형                                          |
| 백도어(트랩도어) | 특정기능에 허가받지 않은 접근을 허용하는 유형                                            |
| 모바일코드       | 이동성 명령어(스크립트,매크로) 소프트웨어, 플랫폼을 옮겨다니며 같은 기능을 수행하는 유형 |
| Exploit          | 하나 또는 여러 개의 취약점을 노리는 코드                                                 |
| Downloaders      | 다른 아이템(외부)을 컴퓨터에 설치하는 유형                                               |
| Dropper          | 다른 아이템(내부 구성)을 컴퓨터에 설치하는 유형                                          |
| Auto-rooter      | 해커도구, 시스템에 원격 침입 툴                                                          |
| flooders         | 네트워크 시스템에 대량 자료 전송 -> DoS공격                                              |
| keyloggers       | 피해받은 시스템의 키를 갈취하는 유형                                                     |
| rootkit          | 시스템 침입후, 루트 수준의 접근허락 얻는 유형                                            |
| attack kit       | 다양한 번식방법과 payload 기술들로 새로운 악성코드 생성 툴                               |
| Zombie           | 감염된 컴퓨터로 다른 컴퓨터를 공격하는 방식으로도 사용되는 유형                          |
| Browser Hijacker | 브라우저의 입출력을 조작하는 프로그램 유형(잘못된 사이트로 이동되게, ...)                |
| Dialers          | 모뎀이 특정 번호로 연결되도록 하여 공격자가 수익을 얻는 방식으로 사용되는 유형           |
| Joke             | 사용자의 심리적 위협, 불안을 조장하는 유형                                               |
| Haox             | 사용자를 속이거나 장난을 목적으로 하는 유형(허위 바이러스 경고 메일, ...)                |

## 2. 인터넷 활용 보안

### 2.1. 웹브라우저 보안

Internet Explorer 브라우저  
방문하는 웹 사이트마다 서로 다른 보안 요구사항이 필요 -> 사용자가 정의가능한 보안 영역 지원

| 사용가능한 영역       | 기본 보안 정도 | 설명                                                           |
| ------------------- | ----------- | -------------------------------------------------------------- |
| 로컬 인트라넷        | 낮음          | 사용자의 네트워크 내 웹 사이트                                      |
| 신뢰할 수 있는 사이트 | 보통          | 사용자가 안전한 콘텐츠라고 신뢰하는 웹 사이트                         |
| 인터넷              | 약간 높음      | 이외 웹 사이트                                                   |
| 제한된 사이트        | 높음           | 사용자가 신뢰하지 않는 웹 사이트, 보안 페이지를 설정할 수 없는 웹 사이트 |

### 2.2. 쿠키

Cookie  
웹 사이트 편리하게 이용하려는 목적  
- 사용자가 웹 사이트 방문시 쿠키 생성됨
- 클라이언트 단에 쿠키값 저장
- 특정 웹 사이트에서는 해당 도메인의 설정된 조건에서의 쿠키만 읽을 수 있음
- 실행파일이 아닌 텍스트파일 -> 전파불가
- 사용자 신원정보 조회 등, 데이터 노출의 위험 존재

쿠기 구조: `Set-Cookie: name=value;expires=[];path=[];domain=[];httpOnly;secure`
- path: 지정한 path 이하만 쿠키 전송
- domain: 지정한 domain 이하만 쿠키 전송
- httpOnly: 클라이언트단에서 쿠키 변경 불가
- secure: **HTTPS** 으로의 접근만 쿠키 전송

#### 쿠기 보안 공격
- XSS 공격
  - 웹 사이트에 공격자의 동적 스크립트가 심어짐 -> 사용자가 접근 -> 쿠키값에 접근하여 탈취 및 변경
  - e.g. javascript; `document.cookie`
- 스니핑 공격
  - 클라이언트에 저장된 쿠키값이 네트워크로 전송
  - 암호화를 하지 않으면 -> 네트워크 스니핑으로 쿠키값 탈취가능
- 외부PC 쿠키 유출
  - 외부PC에서 특정 신분(로그인)으로 사용하고 지우지 않으면 -> 공격자가 해당 PC로부터 쿠키값 탈취가능
  - 공용PC, PC방, 전산실PC, 등 주의할 것

### 2.3. 세션

웹 사이트를 개별 클라이언트를 구분하려는 목적  
- 서버 단에 상태정보가 저장 -> 클라이언트 정보가 서버에서 관리되어 보안용이, 자원부하 주의
- 클라이언트는 세션ID 값만 저장

#### 세션 보안 공격
- HTTP 세션 하이재킹(Session ID Hijacking)
  - 공격자가 사용자의 세션ID를 탈취 -> 사용자로 위장하여 접근 -> 사용자 권한 탈취
  - 예방책
    - 세션ID는 서버에서 생성
    - 난수 알고리즘으로 세션ID 생성 -> 패턴 예측불가
    - URL rewrite 기능 사용 금지 -> 세션ID를 URL로 노출방지
    - 일정시간 주기로(타임아웃 짧게) 세션ID 재할당